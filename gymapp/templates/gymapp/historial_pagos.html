{% extends "gymapp/base.html" %}
{% block title %}Historial de pagos{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">Historial de pagos â€” {{ member.nombre_apellido }} (DNI {{ member.dni }})</h2>

  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
    {% for item in historial %}
      <div class="col">
        <div class="card h-100 shadow-sm card-no-border">
          <div class="card-body d-flex flex-column justify-content-between">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <strong>{{ item.mes }}</strong>
              {% if item.pagado %}
                <span class="badge bg-success">Pagado</span>
              {% else %}
                <span class="badge bg-danger">Debe</span>
              {% endif %}
            </div>
            <a href="{% url 'toggle_payment_mes' member.id item.mes %}"
               class="btn {% if item.pagado %}btn-outline-warning{% else %}btn-outline-success{% endif %} w-100">
              {% if item.pagado %}Anular pago{% else %}Marcar pagado{% endif %}
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="mt-4">
    <a href="{% url 'member_list' %}" class="btn btn-outline-secondary">Volver</a>
  </div>
</div>
{% endblock %}
